package api;
;
import io.restassured.http.ContentType;
import io.restassured.http.Header;
import model.Status;
import model.Ticket;
import org.testng.Assert;
import org.testng.annotations.Test;

import java.util.Random;

import static net.serenitybdd.rest.SerenityRest.given;
import static org.assertj.core.api.Assertions.assertThat;



/** Создание и проверка тикета */
public class CreateTicketTest extends BaseTest {

    @Test
    // todo: создать тикет и проверить, что он находится в системе
    public void createTicketTest() {
         createTicket(buildNewTicket(Status.OPEN, 1));
        getTicket(2368);
    }

    protected int getTicket(int id) {
        Ticket ticket =  new Ticket();
             given()
                        .pathParam("id", id)
                        .when().get("/api/searches/{id}")
                        .then()
                        .statusCode(200)
             .extract().as(Ticket.class);
      return getTicket(id);
        // todo: отправить hTTP запрос на получение тикета по его id
    }
}















































































































































































































































































































































































































































































































